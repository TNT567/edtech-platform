# 🚀 登录鉴权与智能刷题升级计划

## 1. 🛡️ 前端安全：实现真正的路由鉴权 (Auth Guard)
我们将构建一个高阶组件 (HOC) `<RequireAuth>` 来包裹所有受保护的路由。

- **逻辑**:
  - 检查 LocalStorage 中是否有 `token`。
  - **有 Token**: 渲染子组件（如 Dashboard, Practice）。
  - **无 Token**: 立即重定向到 `/login`，并记录当前尝试访问的页面以便登录后跳回。
- **实施**: 修改 `App.tsx`，将所有 `/` 下的子路由都包裹在鉴权组件中。

## 2. 🎯 智能刷题升级：支持“主动选择”与“AI 实时生成”
我们将把原本单一的“下一题”按钮升级为一个完整的**练习配置面板**。

### 2.1 后端接口升级
- **新接口 `/api/practice/generate`**:
  - **输入**:
    - `subject` (科目，可选)
    - `knowledgePointId` (指定知识点，可选)
    - `difficulty` (难度偏好，可选)
  - **逻辑**:
    - **如果指定了知识点**: 强制调用 AI (`ContentGenerationService`) 现场生成一道该知识点的题目，不再从数据库老题库里捞。
    - **如果未指定**: 沿用之前的智能推荐策略 (Redis 策略引擎)。

### 2.2 前端体验重构
- **练习页 (`PracticePage`)**:
  - **默认状态**: 显示一个配置卡片 "开始新的练习"。
  - **选项**:
    - **科目选择**: Math (数学), Physics (物理) 等。
    - **模式选择**:
      - 🔮 **智能推荐** (系统自动决定，适合每日打卡)
      - 🎯 **专项突破** (手动选知识点，适合考前复习)
  - **加载动画**: 当选择“专项突破”时，显示 "AI 正在为你现场出题..." 的逼真 Loading 效果。

## 执行步骤
1.  **前端安全**: 创建 `RequireAuth.tsx` 组件并应用到路由。
2.  **后端升级**:
    - 修改 `PracticeController`，新增支持参数的生成接口。
    - 升级 `ContentGenerationService`，使其支持按需生成新题。
3.  **前端交互**:
    - 改造 `PracticePage`，增加练习配置表单（Select 组件）。
    - 对接新接口，展示题目。
